version: "3"
services:
  fortune0:
    build: .
    ports:
      - "8080:8080"
    environment:
      - F0_PORT=8080
      - F0_LICENSE_SECRET=${F0_LICENSE_SECRET:-fortune0-dev-secret-2026}
    volumes:
      - ./data:/app/data
      - .:/app
    restart: unless-stopped

  # Optional: expose via Cloudflare Tunnel
  # Uncomment and add your tunnel token from:
  #   cloudflared tunnel create fortune0-platform
  #   cloudflared tunnel token fortune0-platform
  #
  # tunnel:
  #   image: cloudflare/cloudflared:latest
  #   command: tunnel --no-autoupdate run --token ${TUNNEL_TOKEN}
  #   depends_on:
  #     - fortune0
  #   restart: unless-stopped
